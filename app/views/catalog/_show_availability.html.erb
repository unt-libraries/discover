<% document ||= @document
   id = document[:id]
   doc_presenter = show_presenter(document)
   items = json_str_to_array(document[:items_json])
   more_items = document[:more_items_json].nil? ? nil : json_str_to_array(document[:more_items_json])
%>
<div id="show-availability" class="card item-availability">
  <div class="card-body">
    <h3 class="card-title">Availability</h3>
    <table class="table table-borderless">
      <thead>
      <tr>
        <th scope="col" class="blacklight-location result__label">Location</th>
        <th scope="col" class="blacklight-call-number result__label">Call Number</th>
        <th scope="col" class="blacklight-availability result__label">Availability</th>
        <th scope="col" class="blacklight-request result__label d-none">Request</th>
        <% if items_have_notes?(items) %>
          <th scope="col" class="blacklight-notes result__label">Notes</th>
        <% end %>
      </tr>
      </thead>
      <tbody data-more-scope>
      <% items.each do |item| %>
        <%= render partial: 'show_availability_item', locals: { document: document, items: items, item: item} %>
      <% end %>
      <% if more_items %>
        <tr class="more-min">
          <td><a href="#" onclick="return false" class="reveal-more">more...</a></td>
        </tr>
        <% more_items.each do |item| %>
          <%= render partial: 'show_availability_item', locals: { document: document, items: more_items, item: item, hidden: true} %>
        <% end %>
      <% end %>
      </tbody>
    </table>
  </div>
</div>
