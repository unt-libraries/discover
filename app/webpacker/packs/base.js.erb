// Script files that should be included in all pages
import 'core-js/stable';
import 'regenerator-runtime/runtime';
import Rails from '@rails/ujs';
import Turbolinks from 'turbolinks';
import 'jquery'
import 'popper.js'
import 'bootstrap'
import initDOM, * as www from '../src/javascripts/www/_main';
import sidebarTypeaheads from '../src/javascripts/www/_typeaheads';
import { initTooltips, initPopovers } from "../src/javascripts/_ui";
import './base.scss';

document.addEventListener("DOMContentLoaded", () => {
  Rails.start();
  Turbolinks.start();
});

// Modal manually imported, otherwise isn't available for blacklight modal
import 'bootstrap/js/dist/modal';
import 'blacklight-frontend/app/javascript/blacklight/core';
import 'blacklight-frontend/app/javascript/blacklight/modal';
import 'blacklight-frontend/app/javascript/blacklight/button_focus';
// Import overridden search_context for google analytics
import '../src/javascripts/override/search_context';

document.addEventListener('turbolinks:load', () => {
  initTooltips();
  initPopovers();
  Blacklight.modal.setupModal();
  initDOM();
  sidebarTypeaheads();
});